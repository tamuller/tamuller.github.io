"use strict";function bookingCalendar(a){var b=(new Date).getMonth(),c=12,d=(new Date).getFullYear(),e=function(a){return document.createElement(a)},f=null,g=["January","February","March","April","May","June","July","August","September","October","November","December"],h={render:function(a,b,c,d){var f=e("table"),g=!!d;return f.setAttribute("class","month"),f.appendChild(this.renderHeader(a,b,!g)),f.appendChild(this.renderCalendarBody(c,a,b)),f},findFirstDayOfMonth:function(a,b){return new Date(b,a,1).getDay()},renderCalendarBody:function(a,b,c){for(var d=this.findFirstDayOfMonth(b,c),f=this.getLastDay(b,c),g=1-d,h=e("tbody"),i=this.createReservations(a,f,b,c);f>g-7;)h.appendChild(this.renderRow(g,f,i)),g+=7;return h},renderRow:function(a,b,c){var d,f,g=e("tr");for(d=0;7>d;d++){f=e("td");var h=a+d;h>0&&b>=h&&(f.appendChild(document.createTextNode(h)),f.setAttribute("class",c[h])),g.appendChild(f)}return g},getAdjacentMonths:function(a,b){var c={prev:{},next:{}};return a>0&&11>a?(c.prev={mo:a-1,yr:b},c.next={mo:a+1,yr:b}):0===a?(c.prev={mo:11,yr:b-1},c.next={mo:a+1,yr:b}):(c.prev={mo:a-1,yr:b},c.next={mo:0,yr:b+1}),c},dayIsBooked:function(a,b,c,d){var e=b+"-"+("00"+(c+1)).substr(-2);return!!(a[e]&&a[e].indexOf(d)>-1)},getLastDay:function(a,b){return new Date(b,a+1,0).getDate()},calcMonthOffset:function(a,b){var c=new Date,d=c.getFullYear(),e=c.getMonth();return 12*(b-d)+(a-e)},createReservations:function(a,b,c,d){var e,f=[],g=0,h=d+"-"+("00"+(c+1)).substr(-2),i=this.getAdjacentMonths(c,d),j=this.getLastDay(i.prev.mo,i.prev.yr),k=this.dayIsBooked(a,i.prev.yr,i.prev.mo,j),l=k;for(e=1;b+1>e;e++)a[h]&&a[h][g]==e?(f[e]="booked",1===e&&k===!1?f[e]+=" start":e>1&&l===!1&&(f[e]+=" start"),l=!0,g++):(f[e]=l===!0?"booked end":"",l=!1);return f},renderHeader:function(a,b,c){var d=e("thead"),f=e("tr"),h=e("th");h.setAttribute("colspan",7),h.setAttribute("class","month-header"),h.appendChild(c?this.renderMonthSelect(a,b):document.createTextNode(g[a]+" "+b)),f.appendChild(h),d.appendChild(f),f=e("tr");for(var i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],j=0;7>j;j++)h=e("th"),h.appendChild(document.createTextNode(i[j])),f.appendChild(h);return d.appendChild(f),d},renderMonthSelect:function(a,f){var h,i,j,k,l=e("select"),m=b,n=d;for(h=0;c>h;h++)i=g[m+h]+" "+n,j=m+h+"-"+n,k=e("option"),k.setAttribute("value",j),m+h==a&&f==n&&k.setAttribute("selected",!0),k.appendChild(document.createTextNode(i)),l.appendChild(k),m+h>10&&(m=-h-1,n++);return l},renderNavigationBtn:function(a,b,c,d){var f=e("div");if(f.setAttribute("class","calendar-navigation "+a),d){var g=e("a");g.setAttribute("href","#"),g.setAttribute("title",a),g.innerHTML='<svg><use class="next-prev-btn" xlink:href="#'+a+'"/></svg>',g.addEventListener("click",this.onNaviClick(b,c)),f.appendChild(g)}return f},onNaviClick:function(a,b){return function(c){c.preventDefault(),h.calcNumCals(a,b)}},renderCalendarSection:function(a,b,c){var d,g,i=a||1,j={next:{mo:b,yr:c}},k=!1,l=e("div");l.setAttribute("class","cal-align clearfix");var m=this.getAdjacentMonths(b,c);g=this.renderNavigationBtn("previous",m.prev.mo,m.prev.yr,this.calcMonthOffset(b,c)>0),l.appendChild(g);for(var n=0;i>n;n++)n>0&&(j=h.getAdjacentMonths(j.next.mo,j.next.yr),k=!0),d=h.render(j.next.mo,j.next.yr,f,k),l.appendChild(d);return g=this.renderNavigationBtn("next",m.next.mo,m.next.yr,this.calcMonthOffset(j.next.mo,j.next.yr)<12),l.appendChild(g),l},calcNumCals:function(b,c){var d,e=window.innerWidth;d=625>e?h.renderCalendarSection(1,b,c):960>e?h.renderCalendarSection(2,b,c):h.renderCalendarSection(3,b,c);var f=document.getElementById(a).firstChild;f.parentNode.replaceChild(d,f)}},i={onSelectChange:function(a){var c,e;if(a){var f=a.target.selectedOptions[0].getAttribute("value").split("-");c=parseInt(f[0],10),e=parseInt(f[1],10)}else c=b,e=d;h.calcNumCals(c,e)}};if(a&&document.getElementById(a)){var j=new XMLHttpRequest;j.addEventListener("load",function(){f=JSON.parse(this.responseText),setTimeout(i.onSelectChange,500)}),j.open("GET","/reservations.json"),j.send(),document.getElementById(a).onchange=i.onSelectChange}}